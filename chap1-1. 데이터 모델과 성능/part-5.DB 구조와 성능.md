## PART 5. DB 구조와 성능

### ✅ 슈퍼타입 / 서브타입 데이터 모델 변환을 통한 성능 향상

**🔹 슈퍼/서브 타입 모델**

: 속성을 항당하여 배치하는 수평 분할된 형태의 모델(공통 속성은 슈퍼타입으로 모델링하고 차이가 있는 속성은 서브타입으로 구분됨), 변환을 통해 </br>
1) 정확하게 업무를 표현할 수 있고, </br>
2) 물리적 모델링 시 선택의 폭을 넓힐 수 있다.

**🔹 슈퍼/서브 타입 데이터 모델의 변환**

- 슈퍼/서브타입에 대한 변환을 잘못하면 성능이 저하되는 이유
  : 트랜잭션의 특성을 고려하지 않고 테이블을 설계했기 때문이다.

  - 변환 기준 : 데이터 양, 트랜잭션 유형
    1. 트랜잭션은 항상 일괄로 처리하는데 테이블은 개별로 유지되어 Union 연산에 의해 성능이 저하될 수 있다.
    2. 트랜잭션은 항상 서브타입 개별로 처리하는데 테이블은 하나로 통합되어 있어 불필요하게 많은 양의 데이터가 집약되어 있어 성능이 저하되는 경우가 있다.
    3. 트랜잭션은 항상 슈퍼+서브 타입을 공통으로 처리하는데 개별로 유지되어 있거나 하나의 테이블로 집약되어 있어 성능이 저하되는 경우가 있다.

**🔹 슈퍼/서브 타입 데이터 모델의 변환 기술**

1. **1:1 타입(OneToOne Type)** : 개별로 발생되는 트랜잭션에 대해서는 개별 테이블로 구성한다.
   슈퍼타입과 서브타입 각각 필요한 속성과 유형에 적합한 데이터만 가지도록 분리하여 1:1 관계를 갖도록 한다.
2. **슈퍼/서브 타입(Plus Type)** : 슈퍼타입과 서브타입을 공통으로 처리하는 트랜잭션에 대해 슈퍼타입과 서브타입 각각의 테이블로 구성한다.
3. **All in One 타입(Single Type)** : 전체를 하나로 묶어 트랜잭션이 발생할 때는 하나의 테이블로 구성한다.

|  | 1:1 타입         | 슈퍼/서브 타입        | All in One 타입     |
| --- |----------------|-----------------|-------------------|
| 특징 | 개별 테이블 유지      | 슈퍼/서브 타입 테이블 구성 | 단일 테이블 구성         |
| 트랜잭션 유형 | 개별 처리          | 슈퍼/서브 타입 공통 처리  | 일괄 처리             |
| 확장성 | 좋음 (테이블 추가 용이) | 보통              | 나쁨                |
| 조인 성능 | 나쁨 (조인 많이 필요)  | 나쁨 (조인 많이 필요)   | 좋음                |
| I/O 성능 | 좋음             | 좋음              | 나쁨 (항상 전체 데이터 조회) |
| 관리용이성 | 나쁨             | 나쁨              | 좋음                |

### ✅ PK/FK DB 성능 향상

**🔹 컬럼 순서 조절을 통한 성능 향상**

- 인덱스의 특징은 여러 개의 속성이 하나의 인덱스로 구성되어 있을 때 앞쪽에 위치한 속성의 값이 비교자로 있어야 좋은 효율을 나타낸다.
- 앞쪽에 위치한 속성의 값이 가급적 ‘=’ 아니면 최소한 범위 ‘BETWEEN’ ‘<>’가 들어와야 효율적이다. </br>
  → 여러 조건이 있을 경우 등호 조건이 걸리는 컬럼을 선두로 이동

**🔹 인덱스 특성을 고현한 성능 향상**

- 물리적인 테이블에 FK 제약 걸었을 때는 반드시 FK 인덱스를 생성하도록 하고,
- FK 제약이 걸리지 않았을 경우에는 FK인덱스를 생성하는 것을 기본정책으로 하되,
- 발생되는 트랜잭션에 의해 겨의 활동되지 않았을 때에만 FK인덱스를 지우는 방법으로 하는 것이 적절한 방법이다.

  → FK에도 인덱스를 생성할 필요가 있다.